"use strict";var ApplicationConfiguration=function(){var a="cameronfresheggs";var b=["ngResource","ngCookies","ngAnimate","ngTouch","ngSanitize","ui.router","ui.bootstrap","ui.utils"];var c=function(b,c){angular.module(b,c||[]);angular.module(a).requires.push(b)};return{applicationModuleName:a,applicationModuleVendorDependencies:b,registerModule:c}}();"use strict";angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies);angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function(a){a.hashPrefix("!")}]);angular.element(document).ready(function(){if(window.location.hash==="#_=_")window.location.hash="#!";angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])});"use strict";ApplicationConfiguration.registerModule("articles");"use strict";ApplicationConfiguration.registerModule("core");"use strict";ApplicationConfiguration.registerModule("users");"use strict";angular.module("articles").run(["Menus",function(a){a.addMenuItem("topbar","Articles","articles","dropdown","/articles(/create)?");a.addSubMenuItem("topbar","articles","List Articles","articles");a.addSubMenuItem("topbar","articles","New Article","articles/create")}]);"use strict";angular.module("articles").config(["$stateProvider",function(a){a.state("listArticles",{url:"/articles",templateUrl:"modules/articles/views/list-articles.client.view.html"}).state("createArticle",{url:"/articles/create",templateUrl:"modules/articles/views/create-article.client.view.html"}).state("viewArticle",{url:"/articles/:articleId",templateUrl:"modules/articles/views/view-article.client.view.html"}).state("editArticle",{url:"/articles/:articleId/edit",templateUrl:"modules/articles/views/edit-article.client.view.html"})}]);"use strict";angular.module("articles").controller("ArticlesController",["$scope","$stateParams","$location","Authentication","Articles",function(a,b,c,d,e){a.authentication=d;a.create=function(){var b=new e({title:this.title,content:this.content});b.$save(function(b){c.path("articles/"+b._id);a.title="";a.content=""},function(b){a.error=b.data.message})};a.remove=function(b){if(b){b.$remove();for(var d in a.articles){if(a.articles[d]===b){a.articles.splice(d,1)}}}else{a.article.$remove(function(){c.path("articles")})}};a.update=function(){var b=a.article;b.$update(function(){c.path("articles/"+b._id)},function(b){a.error=b.data.message})};a.find=function(){a.articles=e.query()};a.findOne=function(){a.article=e.get({articleId:b.articleId})}}]);"use strict";angular.module("articles").factory("Articles",["$resource",function(a){return a("articles/:articleId",{articleId:"@_id"},{update:{method:"PUT"}})}]);"use strict";angular.module("core").config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/");a.state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]);"use strict";angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function(a,b,c){a.authentication=b;a.isCollapsed=false;a.menu=c.getMenu("topbar");a.toggleCollapsibleMenu=function(){a.isCollapsed=!a.isCollapsed};a.$on("$stateChangeSuccess",function(){a.isCollapsed=false})}]);"use strict";angular.module("core").controller("HomeController",["$scope","Authentication",function(a,b){a.authentication=b}]);"use strict";angular.module("core").service("Menus",[function(){this.defaultRoles=["*"];this.menus={};var a=function(a){if(a){if(!!~this.roles.indexOf("*")){return true}else{for(var b in a.roles){for(var c in this.roles){if(this.roles[c]===a.roles[b]){return true}}}}}else{return this.isPublic}return false};this.validateMenuExistance=function(a){if(a&&a.length){if(this.menus[a]){return true}else{throw new Error("Menu does not exists")}}else{throw new Error("MenuId was not provided")}return false};this.getMenu=function(a){this.validateMenuExistance(a);return this.menus[a]};this.addMenu=function(b,c,d){this.menus[b]={isPublic:c||false,roles:d||this.defaultRoles,items:[],shouldRender:a};return this.menus[b]};this.removeMenu=function(a){this.validateMenuExistance(a);delete this.menus[a]};this.addMenuItem=function(b,c,d,e,f,g,h,i){this.validateMenuExistance(b);this.menus[b].items.push({title:c,link:d,menuItemType:e||"item",menuItemClass:e,uiRoute:f||"/"+d,isPublic:g===null||typeof g==="undefined"?this.menus[b].isPublic:g,roles:h===null||typeof h==="undefined"?this.menus[b].roles:h,position:i||0,items:[],shouldRender:a});return this.menus[b]};this.addSubMenuItem=function(b,c,d,e,f,g,h,i){this.validateMenuExistance(b);for(var j in this.menus[b].items){if(this.menus[b].items[j].link===c){this.menus[b].items[j].items.push({title:d,link:e,uiRoute:f||"/"+e,isPublic:g===null||typeof g==="undefined"?this.menus[b].items[j].isPublic:g,roles:h===null||typeof h==="undefined"?this.menus[b].items[j].roles:h,position:i||0,shouldRender:a})}}return this.menus[b]};this.removeMenuItem=function(a,b){this.validateMenuExistance(a);for(var c in this.menus[a].items){if(this.menus[a].items[c].link===b){this.menus[a].items.splice(c,1)}}return this.menus[a]};this.removeSubMenuItem=function(a,b){this.validateMenuExistance(a);for(var c in this.menus[a].items){for(var d in this.menus[a].items[c].items){if(this.menus[a].items[c].items[d].link===b){this.menus[a].items[c].items.splice(d,1)}}}return this.menus[a]};this.addMenu("topbar")}]);"use strict";angular.module("users").config(["$httpProvider",function(a){a.interceptors.push(["$q","$location","Authentication",function(a,b,c){return{responseError:function(d){switch(d.status){case 401:c.user=null;b.path("signin");break;case 403:break}return a.reject(d)}}}])}]);"use strict";angular.module("users").config(["$stateProvider",function(a){a.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]);"use strict";angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function(a,b,c,d){a.authentication=d;if(a.authentication.user)c.path("/");a.signup=function(){b.post("/auth/signup",a.credentials).success(function(b){a.authentication.user=b;c.path("/")}).error(function(b){a.error=b.message})};a.signin=function(){b.post("/auth/signin",a.credentials).success(function(b){a.authentication.user=b;c.path("/")}).error(function(b){a.error=b.message})}}]);"use strict";angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function(a,b,c,d,e){a.authentication=e;if(a.authentication.user)d.path("/");a.askForPasswordReset=function(){a.success=a.error=null;c.post("/auth/forgot",a.credentials).success(function(b){a.credentials=null;a.success=b.message}).error(function(b){a.credentials=null;a.error=b.message})};a.resetUserPassword=function(){a.success=a.error=null;c.post("/auth/reset/"+b.token,a.passwordDetails).success(function(b){a.passwordDetails=null;e.user=b;d.path("/password/reset/success")}).error(function(b){a.error=b.message})}}]);"use strict";angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function(a,b,c,d,e){a.user=e.user;if(!a.user)c.path("/");a.hasConnectedAdditionalSocialAccounts=function(b){for(var c in a.user.additionalProvidersData){return true}return false};a.isConnectedSocialAccount=function(b){return a.user.provider===b||a.user.additionalProvidersData&&a.user.additionalProvidersData[b]};a.removeUserSocialAccount=function(c){a.success=a.error=null;b.delete("/users/accounts",{params:{provider:c}}).success(function(b){a.success=true;a.user=e.user=b}).error(function(b){a.error=b.message})};a.updateUserProfile=function(b){if(b){a.success=a.error=null;var c=new d(a.user);c.$update(function(b){a.success=true;e.user=b},function(b){a.error=b.data.message})}else{a.submitted=true}};a.changeUserPassword=function(){a.success=a.error=null;b.post("/users/password",a.passwordDetails).success(function(b){a.success=true;a.passwordDetails=null}).error(function(b){a.error=b.message})}}]);"use strict";angular.module("users").factory("Authentication",[function(){var a=this;a._data={user:window.user};return a._data}]);"use strict";angular.module("users").factory("Users",["$resource",function(a){return a("users",{},{update:{method:"PUT"}})}]);
//# sourceMappingURL=application.min.js.map